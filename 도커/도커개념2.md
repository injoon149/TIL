## Docker Compose
- 다중 컨테이너 도커 애플리케이션을 정의하고 실행하기 위한 도구

## Redis
- 메모리 기반의 키-값 구조 데이터 관리 시스템으로, 모든 데이터를 메모리에 저장한다.
- 메모리에 저장하기 때문에 Mysql 같은 데이터베이스에 데이터를 저장하는 것보다 데이터를 불러올 때 훨씬 
빠르게 처리할 수 있으며, 영속적으로 보관이 가능하다.
- 서버를 재부팅해도 데이터를 유지할 수 있는 장점이 있다.

## 어플리케이션 소스코드 작성
- 새로운 폴더를 하나 만들고, npm init으로 package.json과 server.js 작성을 마친다.
- 노드 코드를 작성한다.
- 주의사항: 도커 환경에서 레디스 클라이언트 생성 시 주의사항
- 보통 도커를 사용하지 않는 환경에서는 redis 서버가 작동되고 있는 곳의 host 옵션을 url로 주면 되지만,
도커 compose를 사용할 때는 host 옵션을 docker-compose.yml 파일에 명시한 컨테이너 이름으로 주면 된다.
- ![img_21.png](img_21.png)

## 도커 컨테이너 간 통신 시 나타나는 에러
![img_22.png](img_22.png) : 어플의 동작 과정
- 레디스 클라이언트가 작동하려면 레디스 서버가 켜져 있어야 하기 때문에 레디스 서버를 위한 컨테이너를 실행하고,
또 다른 컨테이너 속 레디스 클라이언트를 실행해야 한다.
- 하지만 서로 다른 컨테이너 사이에는 아무런 설정 없이는 통신할 수 없다.
- 이 때 사용 가능한 도구 : `Docker Compose` : 멀티 컨테이너 상황에서 쉽게 네트워크를 연결시켜 준다.

## Docker-compose 사용
- Dockerfile을 생성했던 디렉터리와 같은 디렉터리에 docker-compose.yml 파일을 생성한다.
- yml 파일 : 일반적으로 구성 파일 및 데이터가 저장되거나 전송되는 응용 프로그램에서 사용되고, 원래는 xml이나 json 포맷으로
많이 쓰였지만 좀 더 사람이 읽기 쉬운 포맷으로 나타낸 게 yml이다.
- ![img_23.png](img_23.png)
- 위 사진과 같이 docker-compose.yml 파일을 생성한다.

## Docker-compose 를 사용하는 빌드/중단
- `docker-compose up -d --build` 명령어를 사용하면, 하나의 터미널에서 앱을 작동시키고 중단시킬 수 있다.
- `-d 옵션` : detached 모드로서, 앱을 백그라운드에서 실행시킨다. 그래서 앱에서 나오는 output을 출력하지 않는다.
- `docker-compose down` : docker-compose를 사용하는 빌드를 중단시킨다.

## React 앱 설치하기
- 리액트를 파일에 설치하기 위한 명령어
- `npm init`, `npm install create-react-app`, `npx create-react-app myapp` 순으로 명령어 작성.
- 리액트 애플리케이션 실행 : `npm run start`
- 개발한 것에 문제없는지 테스트: `npm run test`
- 배포를 위한 명령어 : `npm run build`

## 어플리케이션 개발
- 도커 명령어 작성
- dockerfile 작성
