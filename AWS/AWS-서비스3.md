## Amazon EKS - AWS에 컨테이너 실행
- AWS에 관리형 쿠버네티스 클러스터를 실행할 수 있는 서비스.
- Docker로 컨테이너화한 애플리케이션의 자동 배포, 확장, 관리 지원.
1. EC2 시작 모드 : EC2 인스턴스처럼 작업자 모드 배포
2. Fargate 모드 : EKS 클러스터에 서버리스 컨테이너 배포할 때 사용
- 사용 사례: 회사가 온프레미스나 클라우드에서 쿠버네티스 사용 중일때, 쿠버네티스 클러스터를 관리할 때

## Amazon EKS - 관리형 노드 그룹
- AWS로 노드, 즉 EC2 인스턴스를 생성하고 관리한다.
- EKS 클러스터에 데이터 볼륨을 연결해서 사용할 수 있다.

## AWS APP Runner
- 완전 관리형 서비스로, 규모에 따라 웹 애플리케이션, API 배포를 돕는다.
1. 소스 코드나 도커 컨테이너 이미지로 원하는 구성을 설정할 수 있다.
2. App Runner 서비스가 웹 앱을 빌드하고 배포 => `오토 스케일링이 가능하고, 가용성이 높으며, 로드 밸런싱 및 암호화 기능 지원`

## AWS Lambda
- Lambda에 컨테이너를 실행해야 할 경우 해당 컨테이너가 Lambda 런타임 API를 구현하지 않으면 ECS나 Fargate에서 컨테이너를 실행해야 한다.
- API Gateway는 Rest API 생성해서 람다함수 호출, Kinesis는 람다 이용해 데이터 변환, DynamoDB는 람다에 대한 트리거 생성.
- EventBridge에서 람다함수를 1시간마다 작동시켜서 서버리스 Cron 작업을 할 수 있다.
- Cron 작업 : EC2 인스턴스에서 작업을 생성하는 방법

## Lambda 한도
- 실행 한도와 배포 한도가 있다.
1. 실행 한도: 실행 시 메모리 할당량 : 128MB ~ 10GB, 최대 실행 시간은 15분, 환경 변수는 최대 4KB, 임시공간은 크기 최대 10GB, 
최대 1000개까지 동시 실행 가능.
2. 배포 한도: 압축 시 최대 크기는 50MB, 압축X는 250MB, 환경 변수 한도는 4KB

## 엣지에서의 사용자 지정
- CloudFront를 사용할 때는 엣지 로케이션을 통해 콘텐츠를 배포한다.
- 엣지 함수: CloudFront 배포에 연결하는 코드 => 지연 시간 최소화
Ex) CloudFront 함수와 Lambda@Edge 함수 두 가지가 있고, CloudFront의 CDN 콘텐츠를 사용자 지정하는 경우에 사용한다.
1. CloudFront 함수 : JavaScript로 이루어져 있고, 고성능, 고확장성이 필요할 때 뷰의 요청과 뷰의 응답에만 사용된다.
2. Lambda@Edge 함수 : Node JS, Python으로 이루어져 있고, CloudFront가 오리진에 요청을 전송하기 전에 수정할 수 있고, 함수를
작성하면 CloudFront가 모든 로케이션에 해당 함수를 복제한다.

## Lambda in VPC
- 대표적 사용 사례: RDS 프록시
- 데이터베이스 연결의 폴링과 공유를 통해 확장성 높이고, 장애 발생한 경우 조치시간 낮추고, IAM 인증 강제하여 보안 높이고, 자격 증명은
Secrets Manager에 저장된다.
- 퍼블릭 액세스가 불가능하므로 사용하는 VPC 안에서 Lambda 함수를 사용해야 한다.

## Amazon DynamoDB
- 완전 관리형 데이터베이스로, 데이터가 다중 AZ 간에 복제되어 가용성 높임.
- 성능은 수 밀리초를 자랑하고 일관성 높다. 보안은 IAM과 통합됨.
- 스키마를 빠르게 전개할 때 선택할 수도 있다.
- Provisioned Mode와 온 디맨드 모드가 있다.

## DynamoDB의 고급 기능
1. DynamoDB Accelerator(DAX)
- DynamoDB를 위한 고가용성의 완전 관리형 무결절 인메모리 캐시로, DynamoDB에 읽기 작업이 많을 때
DAX 클러스터를 생성하고 데이터를 캐싱하여 읽기 혼잡을 해결한다.
- 캐시 데이터에 마이크로초 수준의 지연 시간 제공.

2. DAX vs ElastiCache
- DAX는 DynamoDB 앞에 있고, 개별 객체 캐시와 쿼리와 스캔 캐시를 처리하는 데에 유용하다.
- Elasticache는 집계 결과 저장, DAX는 대용량의 연산 저장할 때 좋다.

3. DynamoDB - 스트림 처리
- 테이블의 모든 수정 사항 포함하는 스트림 생성 : 변경 사항에 반응
- DynamoDB Stream은 보존 기간 24시간, 람다 트리거로 바로 이동하고 Kinesis Data Stream은 보존 기간 1년,
Kinesis Data Firehose로 연결한다.

4. DynamoDB - Global Table
- 여러 리전 간에 복제가 가능한 테이블
- 복수의 리전에서 짧은 지연 시간으로 액세스, DynamoDB 스트림 활성화해야 인프라 구축.
- DynamoDB - TTL: 만료 기간 속성
-> 사용 사례: 최근 항목만 저장, 2년 후 데이터 삭제해야 하는 규정, 웹 세션 핸들링
- 웹 세션 핸들링: 사용자가 웹사이트에 로그인했을 때 해당 세션을 중앙 저장소인 DynamoDB에 2시간 동안 저장.

5. DynamoDB - 백업 옵션
- 지정 시간 복구(PITR)을 사용한 지속적인 백업, 온디맨드 백업, AWS 백업 서비스 이용 가능.

## API Gateway
- Lambda와 통합되면 완전한 서버리스, AWS 서비스와도 통합된다.
- 단계 함수를 실행할 수도 있고, API Gateway에서 직접 SQS에 메시지를 게시할 수도 있다.

## 엔드포인트 타입
1. Edge 최적화 : 글로벌 클라이언트용. 모든 요청이 CloudFront 엣지 로케이션을 통해 라우팅되므로 지연 시간이 개선된다.
2. 리전 배포: 모든 사용자는 API Gateway를 생성한 리전과 같은 리전에 있어야 한다.
3. Private API Gateway : VPC 내에서만 접근할 수 있다.

## Step Functions(단계함수)
- 서버리스 워크플로를 시각적으로 구성할 수 있는 기능
- 복잡한 워크플로 그래프를 만들어 AWS에서 실행시킬 수 있는 편리한 도구
- 기능: 시퀀싱, 병행 실행 등

## 마이크로서비스 아키텍처
- 서비스 개발 수명 주기를 줄이기 위해 사용한다.
- 각 서비스가 독립적으로 확장하여 코드 리포지토리를 갖춘다.
- 두 가지 패턴이 있다.
1. 동기식 패턴: 다른 마이크로서비스를 명시적으로 호출한다.(API Gateway, 로드 밸런서)
2. 비동기식 패턴: S3처럼 SQS, Kinesis, SNS 등에 트리거로 작용하는 경우

##  Amazon Kinesis Data Stream
- 확장성과 내구성이 뛰어난 실시간 데이터 스트리밍 서비스
- 초당 기가바이트의 데이터를 포착하고 리플레이 기능을 통해 이러한 데이터를 소비 애플리케이션으로 전송한다.

## Amazon Athena
- Amazon S3 버킷에 저장된 데이터 분석에 사용하는 서버리스 쿼리 서비스
- 데이터를 분석하려면 표준 SQL 언어로 파일을 쿼리해야 하고, Amazon QuickSight와 함께 사용된다.
- 사용 사례: 임시 쿼리 수행, 비즈니스 인텔리전스 분석 및 보고, AWS 서비스에서 발생하는 로드 쿼리&분석
- 람다함수를 이용하면 S3뿐만 아니라 다른 서비스에서도 쿼리가 가능하다.
- 
## Amazon Athena - 성능 향상
1. 데이터를 적게 스캔할 유형의 데이터 사용(열 기반 데이터 이용)
- Amazon Parquet or ORC를 이용하여 필요한 열의 데이터만 스캔한다.
- AWS Glue를 이용하면 csv와 parquet 간의 데이터를 변환하는 데에 유용하다.
2. 데이터 압축, data set 분할, 큰 파일을 사용해서 오버헤드 최소화

## Amazon Redshift
- 데이터베이스이자 분석 엔진
- 온라인 분석 처리를 의미하는 OLAP 유형의 데이터베이스이며, 분석과 데이터 웨어하우징에 사용한다.
- 열 기반 데이터 스토리지를 사용하기 떄문에 성능 향상 가능
- 복잡한 쿼리는 Athena보다 Redshift가 더 적합하다.

## Amazon Redshift - 기능
1. 스냅샷 & 장애 복구
- 스냅샷을 수동으로 사용하거나 자동화할 수 있다. 클러스터의 스냅샷을 다른 AWS 리전에 자동으로 복사하도록 Redshift를 구성하여
재해 복구 전략을 적용할 수 있다.
- Amazon Kinesis Data Firehose, Copy 명령어를 사용하여 S3에서 복사, JDBC 드라이버를 사용하여 Redshift 클러스터에
데이터를 삽입할 수 있다.
2. Redshift Spectrum
- Amazon S3에 있는 데이터를 Redshift를 통해 분석하지만 저장은 x
3. Amazon Opensearch
- 데이터베이스에서 모든 필드 검색 가능하다.
- OpenSearch 대시보드를 통해 이를 시각화할 수 있다.

## 암호화 메커니즘
1. 전송 중 암호화(SSL)
2. 서버 측 저장 데이터 암호화
- 데이터가 서버에 수신된 후 암호화. 암호화 키와 복호화 키는 KMS 같은 곳에 따로 관리된다.
3. 클라이언트 측 암호화
- 데이터는 클라이언트가 암호화하고 서버 데이터 저장소는 데이터를 암호화/복호화 불가, 암호화된
데이터를 받기만 한다.

## KMS(Key Management Service)
- 데이터에 대한 액세스를 쉽게 제어할 수 있다.
- KMS를 쓰면, CloudtRAIL을 통해, 키를 사용하기 위해 이루어진 모든 API 호출을 감사할 수 있다.
- AWS 서비스와 통합할 수 있다. EX) EBS 볼륨에 저장되어 있는 데이터 암호화
- 대칭 KMS 키는 이미지를 암호화/복화하는 키가 동일하고, 비대칭 키는 서로 다르다.

## KMS - Multi Region Key
- 다른 AWS 리전에서 사용할 수 있는 KMS 키 세트로, 서로 교차해서 사용할 수 있다.
- 사용 사례: 전역 클라이언트 측 암호화
- 클라이언트 측 암호화 사용하면 DB 관리자가 특정 열에 접근할 때, KMS 키에 대한 접근 권한이 없으면 해당 데이터를
읽을 수 없다.
- `AMI는 소스 계정에 있고 KMS 키로 암호화되었다. 어떤 방식으로 A 계정의 AMI에서 B 계정의 EC2 인스턴스를 시작할지?`
- 1. 시작 권한으로 AMI 속성 수정 : B 계정에서 AMI를 시작하도록 허용한다.
- 2. B 계정에서 사용하도록 KMS 키도 공유 : 키 정책으로 실행
- 3. B 계정에서 AMI와 KMS 키 모두 사용할 수 있는 충분한 권한을 가진 IAM 역할이나 사용자 생성.

## SSM 매개변수 저장소
- 구성 및 암호를 위한 보안 스토리지, db-url이나 db-password 저장
- 매개변수 정책: 이를 통해 만료 기한을 뜻하는 TTL을 매개변수에 할당할 수 있다. 한 번에 여러 개의 정책도 할당 가능.

## AWS Secrets Manager
- 암호를 저장하는 서비스. X일마다 강제로 암호를 교체하여 암호 관리를 더 효율적으로 할 수 있다.
- 교체할 암호를 강제 생성 및 자동화할 수 있다: 새 함수를 생성할 람다 함수 정의 필요.
- RDS와 Aurora의 통합 가능
- 복수의 AWS 리전에 암호 유지 가능.

## AWS Certificate Manager(ACM)
- TLS 인증서를 AWS에서 프로비저닝, 관리 및 배포하게 해 준다.
- 퍼블릭 인증서 요청: 인증서에 포함할 도메인 이름을 나열하고, 유효성 검증 방법 선택, 인증서 발행
- AWS Config 사용 : 만료된 인증서를 확인하는 규칙을 설정해서 Config 서비스가 ACM 서비스를 검사하여, 규칙에 위배되는 인증서가 있을 경우
규정 비준수 이벤트가 EventBridge로 간다.

## AWS WAF(웹 애플리케이션 방화벽)
- 계층 7에서 일어나는 일반적인 웹 취약점 공격으로부터 웹 애플리케이션을 보호한다.
- WAF의 배포는 Application Load Balancer, API Gateway, CloudFront, AppSync GraphQL API, Cognito User Pool에 할 수 있다.
- 방화벽 배포 후에는 ACL과 규칙 정의 필요.
- HTTP 헤더와 본문에 기반해 필터링할 수 있고, URL 문자열을 조건으로 두어 SQL 주입, XSS 등의 일반적인 공격을 차단할 수 있다.
- 규칙 그룹: 여러 웹 ACL에 추가할 수 있는 재사용 가능한 규칙 모음.

## AWS Shield
- DDOS 공격으로부터 스스로를 보호하기 위한 서비스.
- AWS Shield Standard : 무료, syn/udp flood나 반사 공격 및 L3/L4 공격으로부터 보호한다.
- AWS Shield Advanced : EC2, ELB, Global Accelerator, Route 53 보호, DDOS 대응팀 24시간 상주, 자동 WAF규칙 생성

## Firewall Manager
- AWS Organization에 있는 모든 계정의 방화벽 규칙을 관리하는 서비스
- 여러 계층의 규칙을 동시에 관리할 수 있다. 보안 규칙 설정 가능
- 리소스별 보호: WAF
- 여러 계정에서 WAF 사용, 새 리소스 보호 자동화 : AWS Firewall Manager

## Amazon GuardDuty
- 지능형 위협 탐지를 이용해서 AWS 계정을 보호할 수 있다.
- 머신러닝 알고리즘으로 이상 탐지를 수행하고, 서드파티 데이터를 사용해서 위협을 탐지한다.
- CloudTrail Event Logs, VPC Flow Logs, DNS Logs 검색
- EventBridge 규칙을 설정해서 결과에 대한 알림을 받을 수 있다.
- `암호화폐 공격을 방어할 수 있다 : 전문적인 탐지 기능`

## Amazon Inspector
- 자동화된 보안 평가를 실행할 수 있는 서비스. 보안 취약점을 분석할 수 있다.
- 컨테이너 이미지를 Amazon Ec2로 푸시할 때 실행된다.
- 람다 함수가 배포될 때 코드 등에서 소프트웨어 취약점을 검사할 수 있다.

## Amazon Macie
- 완벽히 관리되는 데이터 보안 및 프라이버시 서비스
- 머신러닝과 패턴 매칭을 이용해서 AWS에 있는 민감한 데이터를 발견하고 보호한다.

## Amazon EMR
- AWS에서 빅 데이터 작업을 위한 하둡 클러스터 생성에 사용된다.
- 방대한 양의 데이터를 분석하고 처리할 수 있다.
- 사용 사례: 데이터 처리, 기계 학습, 웹 인덱싱 등, 하둡, Spark 같은 빅 데이터 관련 기술을 사용한다.

## Amazon Quicksight
- 서버리스 머신 러닝 기반 비즈니스 인텔리전스 서비스, 대시보드 형성
- Redshift, S3 등 다양한 데이터 소스에 연결할 수 있다.
- SPICE 엔진 : 인 메모리 연산 엔진이며, Amazon QuickSight로 데이터를 직접 가져올 때 사용한다.

## AWS Glue
- 추출과 변환, 로드 서비스를 관리하며 ETL 서비스라 한다.
- 분석을 위해 데이터를 준비하고 변환하는 데 매우 유용하다.
- csv 데이터를 parquet 형식으로 변환할 수 있다. 


