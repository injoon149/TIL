## Site to Site VPN
- VPC는 구축했으나 특정 구조가 있는 기업 데이터 센터를 AWS와 비공개로 연결하려면 기업은 고객 게이트웨이를, VPC는
VPN 게이트웨이를 갖추어야 한다.
- 가상 프라이빗 게이트웨이(VGW) : VPN을 연결하여 AWS 측에 있는 VPN Connector가 생성되면 VPC에 연결
- 고객 게이트웨이 : VPN 연결에서 데이터 센터 담당.
- 서브넷의 VPC에서 라우트 전파를 활성화해야 Site to Site VPN 연결이 실제로 작동한다.
- 온프레미스에서 AWS로 EC2 인스턴스 상태를 진단할 때 보안 그룹 인바운드 ICMP 프로토콜이 활성화되어 있는지 확인한다.

## AWS VPN CloudHub
- 여러 VPN 연결을 통해 모든 사이트 간 안전한 소통을 보장한다.
- VPN만을 사용해 서로 다른 지역 사이 기본 및 보조 네트워크 연결성에 사용한다 => 모든 트래픽이 공용 인터넷을 통해 연결된다.

## Direct Connect(DX)
- 원격 네트워크로부터 VPC로의 전용 프라이빗 연결을 제공한다.
- 전용 연결을 사용하고 AWS Direct Connect 로케이션을 사용한다.
- VPC에는 가상 프라이빗 게이트웨이가 있어야 온프레미스 데이터 센터와 AWS 연결이 가능하다.
- 사용 사례: 대역폭 처리량이 증가할 때, 큰 데이터 세트를 처리할 때

## Direct Connect Gateway
- 다른 리전에 있는 하나 이상의 VPC와 연결하고 싶다면 이를 사용한다.
- 설치 기간이 한달이므로 빠르게 데이터를 전송하고 싶을 때는 사용x. 
- Direct connect + VPN -> IPSEC로 암호화한다.

## Direct Connect 복원력
- 핵심 워크로드의 복원력을 높이기 위해서는 여러 Direct Connnect를 설치한다.
- 이를 최대로 끌어올리려면 각 Direct Connect의 로케이션에 독립적인 연결을 두 개씩 수립하면 복원력이 최대이다.
- Site to Site VPN을 백업으로 두어, 기존 연결에 문제가 발생했을 때 사용할 수도 있다.

## 환승 Gateway(Transit Gateway)
- VPC를 모두 피어링할 필요가 없으며, Transit Gateway를 통해 전이적으로 연결된다.
- Transit Gateway에 라우팅 테이블을 생성해서 어느 VPC가 누구와 통신할지, 어떤 연결이 액세스할지 제한한다.

## VPC 트래픽 미러링
- VPC에서 네트워크 트래픽을 수집하고 검사하되, 방해되지 않는 방식으로 실행하는 것!
- NLB로 트래픽을 보내서 트래픽을 분석한다.
- 사용 사례: 콘텐츠 감사, 네트워킹 문제 해결

## Egress-Only Internet Gateway
- IPV6 트래픽에만 사용되며, NAT Gateway와 비슷하지만 IPV6 전용이다.
- VPC 인스턴스에서 IPV6 아웃바운드 연결을 허용하고, 동시에 인터넷이 인스턴스로 IPV6 연결을 시작하지 못하게 막는다.

## AWS Network Firewall
- 전체 vpc를 방화벽으로 보호하는 서비스, 모든 방향에서 들어오는 모든 트래픽을 검사한다.
- 네트워크 트래픽을 세부적으로 관리할 수 있다. 침입 방지.

## Amazon Pinpoint
- 확장 가능한 양방향 인바운드 및 아웃바운드 마케팅 커뮤니케이션 서비스.
- 고객에게 sms 보내고 답장을 받을 수 있다.
- 사용 사례: 마케팅 이메일을 대량으로 보내거나, 트랜잭션 sms 이미지를 전송하여 캠페인 실행.

## Amazon AppFlow
- SAAS 애플리케이션 및 AWS 사이에 데이터를 전송할 수 있는 완전 관리형 통합 서비스. 소스는 Salesforce 등을 사용한다.
- 데이터를 다양한 곳(s3, redshift)으로 보낼 수 있다.

## AWS Amplify
- 웹 및 모바일 애플리케이션 개발 도구
- AWS의 많은 스택을 한번에 통합해서 애플리케이션 생성 가능.

## SSM Session Manager
- EC2 인스턴스와 온프레미스 서버에서 보안 셸을 시작할 수 있다.

## CloudWatch Log
- AWS에서 애플리케이션 로그를 저장할 수 있다.
- CloudWatch Logs Insights : Cloudwatch Log 안의 쿼리 기능
- CloudWatch Logs Subscription(로그 구독) : 로그 이벤트들의 실시간 스트림을 처리, 분석한다. 이를 kinesis data stream, kinesis data firehose,
람다 등에 전송한다.

## CloudWatch Alarm
- EC2 인스턴스에 대한 액션, 오토 스케일링 액션 트리거, SNS 서비스에 알람 전송
- 인스턴스 상태 검사, 시스템 상태 검사에 CloudWatch Alarm을 정의할 수 있다.

## EventBridge
- CloudWatch Event의 새 버전
- 클라우드에서 cron 작업을 예약할 수 있고, 다른 AWS 서비스로 이벤트를 전송할 수 있다.

## Cloudwatch 관련 서비스들
1. Cloudwatch Container Insight
- 컨테이너로부터 지표와 로그를 수집, 집계, 요약하는 서비스. 이를 통해 Cloudwatch에 세분화된 대시보드를 만들 수 있다.
2. Lambda Insights : AWS Lambda에서 일어나는 모니터링과 트러블 슈팅 솔루션, 지표 수집
3. Contributor Insight : Contributor 데이터를 표시하는 시계열 데이터를 생성하고 로그 분석
4. Cloudwatch Application Insight : 모니터링하는 애플리케이션의 잠재적인 문제와 진행 중인 문제를 분석하는 대시보드 생성

## AWS CloudTrail
- AWS 계정의 거버넌스, 감사 실현하는 방법
- AWS 계정 안에서 일어난 모든 이벤트와 API 호출 이력을 얻을 수 있다.
- 1. 관리 이벤트 : AWS 계정 안에서 리소스에 대해 수행된 작업(보안, 로깅 등)을 나타낸다.
- 2. 데이터 이벤트 : 고용량 작업, AWS 람다 실행 활동
- 3. CloudTrail Insights Event : 계정에서 일어나는 이벤트를 분석하고 비정상적인 활동에 대한 탐지를 시도한다.
- 4. CloudTrail 이벤트 보관 : 기본적으로 이벤트는 CloudTrail에 90일 동안 보관, 더 보관하려면 이를 S3에 보관하고 Athena를 통해 분석

## AWS Config
- AWS 내 리소스에 대한 감사와 규정 준수 여부를 기록하는 서비스
- 설정된 규칙에 기반해 구성을 기록
- Ex) 보안 그룹에 제한되지 않은 ssh 접근이 있는지, 버킷에 공용 액세스가 있는지, 시간이 지나며 변화한 ALB 구성이 있는지 등 파악
- SSM 자동화 문서를 이용하여 규정을 준수하지 않는 리소스를 수정할 수 있다.
- 규정 준수 여부 알림을 SNS로 보낼 수 있다.

## S3 버킷 암호화
1. 서버 측 암호화(SSE)
- 1. SSE-S3 : Amazon S3에서 관리하는 키를 이용한 서버 측 암호화
- 2. SSE-KMS : KMS 키를 이용해서 암호화 키 관리. KMS 키에 대한 액세스 필요
- 3. SSE-C : 고객이 제공한 키
2. 클라이언트 측 암호화
- 클라이언트 측의 모든 걸 암호화한 다음에 Amazon S3에 업로드한다.

## CORS
- 교차 오리진 리소스 공유(오리진: 프로토콜 + 도메인 + 포트)
- 웹 브라우저 기반 보안 메커니즘으로, 메인 오리진을 방문하는 동안 다른 오리진에 대한 요청을 허용하거나 거부한다.
- 클라이언트가 S3 버킷에 교차 오리진 요청을 하면, 정확한 CORS 헤더를 활성화해야 한다. => 특정 오리진 또는 *를 붙여 모든 오리진을 허용한다.
- 다른 오리진에서 한 S3 버킷에 들어있는 검색된 이미지, 파일 등을 요청할 수 있게 해 준다.

## S3 - MFA Delete
- 객체 버전을 영구 삭제할 때 필요하다.
- 이를 위해서는 버킷에서 버저닝이 필요하다. 루트 계정만이 MFA delete 활성화/비활성화 가능

## S3 액세스 로그
- 감사 목적으로 S3 버킷에 대한 모든 액세스를 기록할 수 있다.
- 어떤 계정에서든 S3로 보낸 모든 요청은 승인 또는 거부 여부와 상관없이 다른 S3 버킷에 파일로 기록된다. => Amazon Athena로 분석

## Amazon S3 - 사전 서명된 URL
- S3 콘솔, CLI, SDK를 사용하여 생성할 수 있는 URL, 만료 기한이 있다.
- URL을 받는 사용자는 URL을 생성한 사용자의 Get 또는 Put에 대한 권한을 상속한다.
- 사용 사례: AWS 외부의 사용자에게 한 파일에 대한 액세스 권한을 부여해야 할 때 해당 파일에 대한 서명된 URL 생성 => `특정 파일에 대한 임시 액세스`

## S3 Glacier 볼트 잠금
- WORM 모델(한 번 쓰고 여러 번 읽음) 을 채용하기 위해 Glacier 볼트를 잠근다.
- 객체를 가져와서 S3 Glacier 볼트에 넣은 다음 수정, 삭제 못하게 잠근다.
- 단일 객체를 잠글 수 있다.

## S3 Object Lock
1. 규정 준수 모드 : 사용자를 포함한 그 누구도 객체 버전을 덮어쓰거나 삭제할 수 없다.
2. 거버넌스 모드 : 대부분의 사용자는 변경 불가, 관리자 같은 일부 사용자는 IAM을 통해 부여받은 권한으로 보존 기간 변경, 객체 삭제 가능
3. 법적 보존: S3 버킷 내 모든 객체를 무기한으로 보호, s3:putobjectLegalHold IAM 권한 가진 사용자는 법적 보존 설정/제거 가능

## S3 액세스 포인트
- 각 부문에만 사용자가 접근하도록 할 수 있다. S3 버킷의 보안 관리를 간소화해 준다.

## S3 Object Lambda
- 호출자 애플리케이션이 객체를 받기 직전에 그 객체를 수정하려 할 때 사용한다.
- ex) 우리의 버킷을 복제해서 버킷에 각 객체의 다른 버전 갖게 한다.

## Amazon Redshift
- 페타바이트급 데이터와 분당 수천만 건의 요청을 지불하도록 확장.
- 클라이언트 측 및 서버 측 암호화
- 애플리케이션 활성화되어 있지 않을 때 분석 워크로드 구축.

## AWS Organizations
- 글로벌 서비스로, 다수의 AWS 계정을 동시에 관리할 수 있게 해 준다.
- 계정 간에 예약 인스턴스와 Savings Plans 할인이 공유되어, 계정 내 모든 사용량을 모아 할인 혜택을 받을 수 있다.
- 루트 조작 단위(OU) : 세일즈, 리테일 및 재무 OU를 두고 OU별로 멤버 계정을 생성할 수 있다.
- 한번에 모든 계정에 CloudTrail을 생성해서 모든 로그를 중앙 S3 계정으로 전송할 수 있다.
- 서비스 제어 정책(SCP)를 정의할 수 있다.
- SCP : 특정 OU 또는 계정에 적용되는 IAM 정책으로, 해당 사용자와 역할 모두가 계정 내에서 할 수 있는 일을 제한한다. Ex) FullAWSAccess, DenyAccessAthena
- ex) 백업 정책을 통해 조직 전체의 백업 정책을 배포하여, 모든 계정이 규칙을 준수하고 백업이 활성화되도록 할 수 있다.
- ex) 태그 정책을 통해 조직의 다른 모든 계정 내에서 태그를 사용하는 방법을 표준화할 수 있다.

## IAM 조건
- IAM 내부의 정책에 적용되며, 어떤 정책도 될 수 있다.
- GetObject, PutObject, DeleteObject는 버킷 내의 객체에 들어가므로, /*이 들어간다.(ARN이 달라짐)
- aws:principalOrgID라는 조건은 AWS 조직의 멤버 계정에만 리소스 정책이 적용되도록 제한한다.

## IAM 역할 vs 리소스 기반 정책
- IAM 역할을 맡게 되면 기존의 역할을 모두 포기하고 그 역할을 맡는다.
- SNS, SQS, Lambda, EventBridge는 리소스 기반 정책을 사용하고 kinesis data stream에는 IAM 역할을 사용한다.

## AWS IAM Identity Center
- 한 번만 로그인하면 된다. SalesForce, BOX, SAML 2.0 통합이 가능한 어떤 애플리케이션에라도 연결할 수 있다.
- 여러 AWS 계정을 한 번에 로그인할 수 있게 해 준다.
- 다중 계정 권한: 조직에서 여러 계정에 대한 액세스를 관리할 수 있다.
- 권한 셋: 사용자를 그룹에 할당하는 하나 이상의 IAM 정책 정의.

## Microsoft Active Directory(AD)
- AD 도메인 서비스를 사용하는 모든 윈도우 서버에 사용되는 소프트웨어
- 중앙 집중식 보안 관리로 계정 생성, 권한 할당 등의 작업이 가능하다.

## AWS Directory 서비스
- AWS에 액티브 디렉토리를 생성하는 서비스로, 3가지 서비스가 있다.
- 1. AWS 관리형 Microsoft AD : AWS에 자체 액티브 디렉터리를 생성하고 로컬에서 관리
- 2. AD Conector : 프록시로 온프레미스 AD에 리다이렉트하며 MFA 지원
- 3. Simple AD : AWS의 AD 호환 관리형 디렉터리, 온프레미스가 없을 때 사용.

## AWS Control Tower
- 모범 사례를 기반으로 안전하고 규정을 준수하는 다중 계정 AWS 환경을 손쉽게 설정하고 관리할 수 있다.
- 환경 자동 설정, 정책 위반 감지해서 자동 교정. 대화형 대시보드를 통해 모든 계정의 전반적인 규정 준수를 모니터링한다.

## AWS의 이벤트 처리
